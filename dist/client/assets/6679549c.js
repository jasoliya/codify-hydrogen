import"./d8981a99.js";import{r as m,T as x,c as b,F as N,j as a}from"./index.cf70f272.js";import{s as V,I as q,u as B}from"./a0211137.js";import{ModelViewer as j}from"./06bdfd67.js";import"./2d57a4bb.js";import"./4592c789.js";import"./920a254b.js";import{P as T,M as I}from"./1ce02160.js";import{BaseButton as F}from"./060e543d.js";import{f as E}from"./92add5bc.js";import{j as $}from"./5d366af3.js";import"./57c063f7.js";import"./6bf6f9ed.js";import"./cea0de89.js";import"./3f1ae3a0.js";import"./ee8ad950.js";import"./0af488c0.js";import"./ce1402c4.js";import"./d6282b27.js";function k(){const e=m.exports.useContext(T);if(!e)throw new Error("'useProductOptions' must be a child of <ProductOptionsProvider/>");return e}function D(e,r){if(r==null)return e;const n=Object.keys(r).reduce((t,l)=>{const i=r[l];return i==null?t:t+`&${l}=${i}`},"");return`${e}?${n}`}function L(e,r){return m.exports.useMemo(()=>r?D(e,r):e,[e,r])}function U(e){var s,p;const{data:r,previewImageOptions:n,id:t=r.id,playsInline:l=!0,controls:i=!0,...o}=e,d=V({src:(p=(s=r.previewImage)==null?void 0:s.url)!=null?p:"",...n});if(!r.sources)throw new Error("<Video/> requires a 'data.sources' array");return x.createElement("video",{...o,id:t,playsInline:l,controls:i,poster:d},r.sources.map(c=>{if(!((c==null?void 0:c.url)&&(c==null?void 0:c.mimeType)))throw new Error("<Video/> needs 'source.url' and 'source.mimeType'");return x.createElement("source",{key:c.url,src:c.url,type:c.mimeType})}))}function R(e){const{data:r,options:n,id:t=r.id,frameBorder:l="0",allow:i="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:o=!0,...d}=e;if(!r.embedUrl)throw new Error("<ExternalVideo/> requires the 'embedUrl' property");const s=L(r.embedUrl,n);return x.createElement("iframe",{...d,id:t!=null?t:r.embedUrl,frameBorder:l,allow:i,allowFullScreen:o,src:s})}function _({data:e,options:r,...n}){switch(e.mediaContentType){case"IMAGE":{const t=e.image;return!t||!t.url?(console.warn(`No "image" property was found on the "data" prop for <MediaFile/>, for the "type='image'"`),null):x.createElement(q,{...n,data:t,loaderOptions:r})}case"VIDEO":return x.createElement(U,{...n,data:e,previewImageOptions:r});case"EXTERNAL_VIDEO":return x.createElement(R,{...n,data:e,options:r});case"MODEL_3D":return x.createElement(j,{...n,data:e});default:return null}}function G(e){var u;const[r,n]=m.exports.useState(!1),{variantId:t,quantity:l=1,attributes:i,onClick:o,children:d,accessibleAddingToCartLabel:s,...p}=e,{status:c,linesAdd:w}=B(),{selectedVariant:g}=k(),P=(u=t!=null?t:g==null?void 0:g.id)!=null?u:"",O=t===null||P===""||g===null||r||p.disabled;m.exports.useEffect(()=>{r&&c==="idle"&&n(!1)},[c,r]);const v=m.exports.useCallback(()=>{n(!0),w([{quantity:l,merchandiseId:P,attributes:i}])},[w,l,P,i]);return b(N,{children:[a(F,{...p,disabled:O,onClick:o,defaultOnClick:v,children:d}),s?a("p",{style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},role:"alert","aria-live":"assertive",children:r?s:null}):null]})}function A(e,r){var n,t;if(!(!e.length||((t=(n=e==null?void 0:e[0])==null?void 0:n.selectedOptions)==null?void 0:t.length)!==Object.keys(r).length))return e==null?void 0:e.find(l=>Object.entries(r).every(([i,o])=>{var d;return(d=l==null?void 0:l.selectedOptions)==null?void 0:d.some(s=>(s==null?void 0:s.name)===i&&(s==null?void 0:s.value)===o)}))}function H(e){const r=e.reduce((n,t)=>{var l;if(!t.selectedOptions)throw new Error("'getOptions' requires 'variant.selectedOptions'");return(l=t==null?void 0:t.selectedOptions)==null||l.forEach(i=>{var o,d,s,p;n[(o=i==null?void 0:i.name)!=null?o:""]=n[(d=i==null?void 0:i.name)!=null?d:""]||new Set,n[(s=i==null?void 0:i.name)!=null?s:""].add((p=i==null?void 0:i.value)!=null?p:"")}),n},{});return Object.keys(r).map(n=>({name:n,values:Array.from(r[n])}))}function W({children:e,data:r,initialVariantId:n}){const t=m.exports.useMemo(()=>{var u;return E((u=r.variants)!=null?u:{})},[r.variants]);if(!X(t))throw new Error("<ProductOptionsProvider/> requires 'product.variants.nodes' or 'product.variants.edges'");const l=m.exports.useMemo(()=>H(t),[t]),[i,o]=m.exports.useState(()=>C(n,t)),[d,s]=m.exports.useState(()=>S(i));m.exports.useEffect(()=>{const u=C(n,t);o(u),s(S(u))},[n,t]);const p=m.exports.useCallback((u,f)=>{s(h=>{const y={...h,[u]:f};return o(A(t,y)),y})},[s,t]),c=m.exports.useCallback((u,f)=>{var y;const h=A(t,{...d,[u]:f});return(y=h==null?void 0:h.availableForSale)!=null?y:!0},[d,t]),w=m.exports.useMemo(()=>{var u;return E((u=r.sellingPlanGroups)!=null?u:{}).map(f=>{var h;return{...f,sellingPlans:E((h=f==null?void 0:f.sellingPlans)!=null?h:{})}})},[r.sellingPlanGroups]),[g,P]=m.exports.useState(void 0),O=m.exports.useMemo(()=>{var u,f;if(!(!i||!g)){if(!((u=i.sellingPlanAllocations)!=null&&u.nodes)&&!((f=i.sellingPlanAllocations)!=null&&f.edges))throw new Error("<ProductOptionsProvider/>: You must include 'sellingPlanAllocations.nodes' or 'sellingPlanAllocations.edges' in your variants in order to calculate selectedSellingPlanAllocation");return E(i.sellingPlanAllocations).find(h=>{var y;return((y=h==null?void 0:h.sellingPlan)==null?void 0:y.id)===g.id})}},[i,g]),v=m.exports.useMemo(()=>({variants:t,variantsConnection:r.variants,options:l,selectedVariant:i,setSelectedVariant:o,selectedOptions:d,setSelectedOption:p,setSelectedOptions:s,isOptionInStock:c,selectedSellingPlan:g,setSelectedSellingPlan:P,selectedSellingPlanAllocation:O,sellingPlanGroups:w,sellingPlanGroupsConnection:r.sellingPlanGroups}),[c,l,r.sellingPlanGroups,r.variants,d,g,O,i,w,p,t]);return a(T.Provider,{value:v,children:e})}function C(e,r){if(e){const n=r.find(t=>(t==null?void 0:t.id)===e);return n||console.warn("<ProductOptionsProvider/> received a 'initialVariantId' prop, but could not actually find a variant with that ID"),n}if(e===null)return null;if(e===void 0)return r.find(n=>n==null?void 0:n.availableForSale)||r[0]}function S(e){return e!=null&&e.selectedOptions?e.selectedOptions.reduce((r,n)=>{var t,l;return r[(t=n==null?void 0:n.name)!=null?t:""]=(l=n==null?void 0:n.value)!=null?l:"",r},{}):{}}function X(e){return!(!e||!Array.isArray(e))}function M(e){var p,c,w,g,P,O,v,u;const{priceType:r="regular",variantId:n,valueType:t="min",data:l,...i}=e;if(l==null)throw new Error("<ProductPrice/> requires a product as the 'data' prop");let o,d;const s=n&&(c=E((p=l==null?void 0:l.variants)!=null?p:{}).find(f=>(f==null?void 0:f.id)===n))!=null?c:null;if(r==="compareAt")if(n&&s){if(((w=s.compareAtPriceV2)==null?void 0:w.amount)===((g=s.priceV2)==null?void 0:g.amount))return null;o=s.compareAtPriceV2}else t==="max"?o=(P=l==null?void 0:l.compareAtPriceRange)==null?void 0:P.maxVariantPrice:o=(O=l==null?void 0:l.compareAtPriceRange)==null?void 0:O.minVariantPrice;else n&&s?(o=s.priceV2,t==="unit"&&(o=s.unitPrice,d=s.unitPriceMeasurement)):t==="max"?o=(v=l.priceRange)==null?void 0:v.maxVariantPrice:o=(u=l.priceRange)==null?void 0:u.minVariantPrice;return o?d?x.createElement(I,{...i,data:o,measurement:d}):x.createElement(I,{...i,data:o}):null}function Y(e){const{createInstantCheckout:r,checkoutUrl:n}=$(),[t,l]=m.exports.useState(!1),{quantity:i,variantId:o,onClick:d,attributes:s,children:p,...c}=e;m.exports.useEffect(()=>{n&&(window.location.href=n)},[n]);const w=m.exports.useCallback(()=>{l(!0),r({lines:[{quantity:i!=null?i:1,merchandiseId:o,attributes:s}]})},[r,i,o,s]);return a(F,{disabled:t!=null?t:c.disabled,...c,onClick:d,defaultOnClick:w,children:p})}function xe({product:e}){return a(W,{data:e,children:a("section",{className:"w-full grid gap-4 px-6 md:px-8 lg:px-12",children:b("div",{className:"grid items-start gap-6 lg:gap-20 md:grid-cols-2 lg:grid-cols-3",children:[a("div",{className:"grid md:grid-flow-row md:p-0 md:overflow-x-auto md:grid-cols-2 md:w-full lg:col-span-2",children:a("div",{className:"md:col-span-2 snap-center card-image aspect-square md:w-full w-[80vw] shadow rounded",children:a(K,{media:e.media.edges})})}),b("div",{className:"sticky md:mx-auto max-x-xl md:mx-w-[24rem] grid gap-8 p-0 md:p-6 md:px-8 top-[6rem] lg:top-[8rem] xl:top-[10rem]",children:[b("div",{className:"grid gap-2",children:[a("h1",{className:"text-4xl font-bold",children:e.title}),e.vendor&&a("span",{className:"text-copy opacity-50",children:e.vendor})]}),a(z,{product:e}),a("div",{className:"mt-8",children:a("div",{className:"text-prose",dangerouslySetInnerHTML:{__html:e.descriptionHtml}})})]})]})})})}function Z({name:e,values:r}){const{selectedOptions:n,setSelectedOption:t}=k();return a(N,{children:r.map(l=>{const i=n[e]===l,o=`option-${e}-${l}`;return b("label",{htmlFor:o,children:[a("input",{className:"sr-only",type:"radio",id:o,name:`option[${e}]`,value:l,checked:i,onChange:()=>t(e,l)}),a("div",{className:`border-b-[2px] py-1 cursor-pointer transition-all-duration-200 ${i?"border-gray-500":"border-nuetral-50"}`,children:l})]},o)})})}function z({product:e}){const{options:r,selectedVariant:n}=k();return n!=null&&n.availableForSale,b("form",{className:"grid gap-8",children:[a("div",{className:"grid gap-4",children:r.map(({name:t,values:l})=>l.length===1?null:b("div",{className:"flex flex-wrap items-baseline gap-6",children:[a("legend",{className:"font-bold",children:t}),a("div",{className:"flex flex-wrap gap-4",children:a(Z,{name:t,values:l})})]},t))}),b("div",{children:[a(M,{className:"text-gray-500 line-through text-lg font-semibold inline-block mr-2 mb-2",priceType:"compareAt",variantId:n.id,data:e}),a(M,{className:"text-gray-900 text-lg font-semibold inline-block mb-2",variantId:n.id,data:e})]}),a("div",{className:"grid items-stratch gap-4",children:a(J,{})})]})}function J(){const{selectedVariant:e}=k(),r=!(e!=null&&e.availableForSale)||!1;return b(N,{children:[a(G,{variantId:e.id,quantity:1,accessibleAddingToCartLabel:"Adding item to your cart",disabled:r,children:a("span",{className:"bg-black text-white inline-block rounded-sm text-center py-3 px-6 max-w-xl w-full",children:r?"Out Of Stock":"Add to bag"})}),r?a("span",{className:"text-black text-center py-3 px-6 border rounded-sm leading-none ",children:"Available in 2-3 weeks"}):a(Y,{variantId:e.id,children:a("span",{className:"inline-block rounded-sm font-medium text-center py-3 px-6 max-w-xl leading-none border w-full",children:"Buy it now"})})]})}function K({media:e}){return e.length?a("div",{className:"grid gap-4 overflow-x-scroll grid-flow-col md:grid-flow-row md:p-0 md:overflow-x-auto md:grid-cols-2 w-screen md:w-full lg:col-span-2",children:e.map((r,n)=>{let t={},l=r.node;l.mediaContentType=="MODEL_3D"&&(t={interactionPromptThreshold:"0",ar:!0,loading:"eager",disableZoom:!0});const i={...l,image:{...l.image,altText:l.alt||"Product image"}};return a("div",{className:`${n%3==0?"md:col-span-2":"md:col-span-1"} snap-center card-image bg-white aspect-square md:w-full w-[80vw] shadow-sm rounded`,children:a(_,{tabIndex:"0",className:"w-full h-full aspect-square object-cover",data:i,options:{crop:"center"},...t})},i.id||i.image.id)})}):null}export{xe as default};
//# sourceMappingURL=6679549c.js.map
